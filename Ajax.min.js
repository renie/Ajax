"use strict";!function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Ajax=b()}(window,function(){var a={};return a.Utils={extend:function(){var b,a={};for(var c in arguments){b=arguments[c];for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d])}return a}},a.call=function(b){var c=new a.Methods(b);c.createRequest(),c.bindEvents(),c.req.send(c.opt.data)},a.setup=function(b){var c=a.Utils.extend(a.Methods.prototype.defaultOptions,b);a.Methods.prototype.defaultOptions=c,a.Methods.prototype.setupExecuted=!0},a.Methods=function(b){if(this.urlIsEmpty(b))throw new ReferenceError("URL is missing. It should be passed by parameter to Ajax.call method or setted on Ajax.setup.");return this.opt=a.Utils.extend(this.defaultOptions,b),this},a.Methods.prototype.defaultOptions={method:"GET",data:null,success:function(){},fail:function(){},contentType:"application/x-www-form-urlencoded; charset=UTF-8",headers:{},context:window},a.Methods.prototype.urlIsEmpty=function(a){return!a.url&&!this.setupExecuted||this.setupExecuted&&!this.defaultOptions.url},a.Methods.prototype.bindEvents=function(){this.req.onload=this.loadListener.bind(this),this.req.onerror=this.errorListener.bind(this)},a.Methods.prototype.createRequest=function(){this.req=new XMLHttpRequest,this.req.open(this.opt.method,this.opt.url,!0),this.setHeaders()},a.Methods.prototype.setHeaders=function(){this.opt.headers["Content-Type"]=this.opt.contentType;for(var a in this.opt.headers)this.req.setRequestHeader(a,this.opt.headers[a])},a.Methods.prototype.loadListener=function(){if(this.req.status>=200&&this.req.status<400){var a;if("text"!==this.opt.dataType)try{a=JSON.parse(this.req.responseText)}catch(b){a=this.req.responseText}else a=this.req.responseText;this.opt.success.call(this.opt.context,a)}},a.Methods.prototype.errorListener=function(){this.opt.fail.call(this.opt.context,this.req)},a});