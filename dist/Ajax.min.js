"use strict";!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Ajax=e()}(window,function(){var t={};return t.Utils={extend:function(){var t,e={};for(var s in arguments){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},parseData:function(t,e){if("text"===e)return t;try{return JSON.parse(t)}catch(e){return t}}},t.call=function(e){var s=new t.Methods(e);s.createRequest(),s.bindEvents(),s.req.send(s.opt.data)},t.setup=function(e){var s=t.Utils.extend(t.Methods.prototype.defaultOptions,e);t.Methods.prototype.defaultOptions=s,t.Methods.prototype.setupExecuted=!0},t.Methods=function(e){if(this.urlIsEmpty(e))throw new ReferenceError("URL is missing. It should be passed by parameter to Ajax.call method or setted on Ajax.setup.");return this.opt=t.Utils.extend(this.defaultOptions,e),this},t.Methods.prototype.defaultOptions={method:"GET",data:null,success:function(){},error:function(){},contentType:"application/x-www-form-urlencoded; charset=UTF-8",headers:{},context:window},t.Methods.prototype.urlIsEmpty=function(t){return!t.url&&!this.setupExecuted||this.setupExecuted&&!this.defaultOptions.url},t.Methods.prototype.bindEvents=function(){this.req.onload=this.loadListener.bind(this),this.req.onerror=this.errorListener.bind(this)},t.Methods.prototype.createRequest=function(){this.req=new XMLHttpRequest,this.req.open(this.opt.method,this.opt.url,!0),this.setHeaders()},t.Methods.prototype.setHeaders=function(){this.opt.headers["Content-Type"]=this.opt.contentType;for(var t in this.opt.headers)this.req.setRequestHeader(t,this.opt.headers[t])},t.Methods.prototype.loadListener=function(){this.req.status>=200&&this.req.status<400?this.opt.success.call(this.opt.context,t.Utils.parseData(this.req.responseText,this.opt.dataType)):this.errorListener.call(this,new Error(this.req.statusText))},t.Methods.prototype.errorListener=function(t){this.opt.error.call(this.opt.context,t,this.req)},t});